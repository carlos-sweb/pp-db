<!DOCTYPE html>
<html lang="en" style="height:100%;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"  />
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.5/build/pure-min.css" >

  <title>Document</title>
</head>
<body style="background-color:#F5F5F5;height:100%!important;min-height:100%!important;">

<div class="pure-g" >
    <div class="pure-u-1-4" >
    		<h3>Base de datos</h3>
    		<ul id="databases"></ul>
    </div>
    <div class="pure-u-3-4">
		<br>
	    	<a href="#/section/database" class="pure-button">Database</a>
	    	<a href="#/section/sql" class="pure-button">SQL</a>
    	<hr>
    	<br>
		<form class="pure-form" onsubmit="createDB(event);event.preventDefault()" >
			<fieldset>
			<legend>Create DB</legend>
				<input type="text" name="dbname" id="dbname" placeholder="Name" required />
				<input min="1" type="number" placeholder="version" value="1" required />
				<button type="submit" class="pure-button pure-button-primary">ADD</button>
			</fieldset>
		</form>

    </div>    
</div>

  

<script src="db.js"></script>
<script type="text/javascript">

var databases = [];

var _db = new ppDB();

_db.open('pharmacy',1,{
	error:function(event){
		alert("Database error: " + event.target.errorCode);
	},
	success:function(event){

		console.log(event.target);

		console.log("Estamos listos SUCCESS");

	},
	upgradeneeded:function(){

		console.log("Estamos listos upgradeneeded");

	}
});

const promise = indexedDB.databases().then(( data )=>{
  	
  	var c = document.getElementById('databases');
  	var string = "";
  	data.forEach((d)=>{
  		string += "<li><a href='#/algo'>"+d.name+"&nbsp;(&nbsp;v-"+d.version+"&nbsp;)</a></li>";
  	});

  	setTimeout(()=>{
  		c.innerHTML = string;
  	},800);
  	
});




function createDB( event ){
	console.log(event.target);
	event.target.reset();
}


</script>

</body>
</html>
